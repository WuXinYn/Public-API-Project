# API-Project

#### 介绍
&emsp;基于 SpringBoot 和 React 的全栈微服务 API 开放平台面向普通用户和开发者，为其提供稳定的、风格统一的 RESTful API 接口调用，开发者也可以在平台上传自己
的接口供他人使用，这些接口通过平台调用更加方便、直观，并且平台提供标准的接口文档，方便各个阶段的开发者阅读理解使用，也降低上手难度。本系统的参与者主要
包括游客、用户和管理员。核心功能模块包括用户管理模块、接口管理模块、支付模块、订单管理模块、资源调配模块、通知管理模块、资源管理模块。

#### 软件架构
```
 后端：backend项目（api-backend）、开发者工具（api-client-sdk）、公共模块(api-common)、模拟接口(api-interface)、网关(api-gateway)  
 前端：开发者平台（官网 api-docs）、接口调用平台(api-frontend)
```

#### 环境配置
```
 前端：  
  React 18  
  AntDesignPro5.x脚手架  
  AntDesign&Procomponents组件库  
  Umi4前端框架  
  OpenAPI前端代码生成  
  Node 22.3.0  
 后端：  
  Java 21.0.6  
  Java Spring Boot  
  MySQL数据库 8.1.0  
  MyBatis-Plus及MyBatis X自动生成  
  API签名认证(Http调用)  
  Spring Boot Starter(SDK开发)  
  Dubbo分布式(RPC、Nacos)  
  Swagger+Knife4j接口文档生成  
  Spring Cloud Gateway微服务网关  
  Hutool、Apache Common Utils、Gson等工具库  
  Redis 5.0.14.1  
  Nacos 2.5.1  
 其他：  
  natapp  
```
 
#### 安装教程

 1. 先本地install安装api-common 模块  
 2. 然后本地install安装api-sdk 模块  
 3. 启动前端api-front和api-docs  
 4. 启动后端api-backend  
 5. 启动后端api-gateway  
 6. 启动模拟接口（api-interface模块中的三个模拟接口）  

#### 研究成果
&emsp;实现了登录安全防护机制，通过统计登录尝试次数
来实现IP限流，有效防止暴力破解，提升了系统的安全防护能力；使用AOP切面统
一实现权限验证；支持接口的增删改查、上下线、发布、调用统计这些核心功能；
建立了基于AccessKey和SecretKey的接口调用安全认证机制，并且这对密钥每个用户
只能拥有一对，且不可更改，并且使用单向加密等复杂加密手段有效防止逆向破解，
使用密钥调用接口有效拦截了未授权、恶意的调用；本系统采用加油包来实现接口
调用收费的功能实现，配合加油包管理使接口计费更加灵活；本系统设计并实现了
用户调用接口记录表，精确地记录每个用户对接口的调用与使用情况；本系统集成
了支付宝沙箱支付，配合加油包业务和订单业务实现了支付流程的完整闭环：选择
接口调用记录、选择加油包、订单生成、支付宝沙箱支付、支付宝异步支付回调、
更新资源信息、退款等功能实现，保障了交易的安全与可靠；本系统与前端交互，
普通用户有权操作的业务统一采用脱敏后返回，有效防止数据泄密，保障了数据安
全性。

#### 创新点
&emsp;实现用户可以上传自己的接口，并且收费。设计以黑白名单IP校验-防代理重发随机数校验-时间戳校
验-AccessKey、SecretKey认证-接口可用性检查-调用次数校验的校验控制体系，构
建了严密的接口调用安全防护网；以加油包设计并实现了资源管理模式，将接口剩
余可调用次数作为可充值、可消费的资源，实现了资源的灵活管理与精确计量；集
成了支付宝沙箱支付与资源管理，通过异步回调和线程池来实现订单、资源的更新，
确保了事务的一致性。

#### 不足
&emsp;本系统接口调用成后的用户调用次数统计是通过response增强来实现，但是如果涉及到调
用成功后的多业务实现，这种方法就不适用了，未来可以使用消息队列来实现这些
业务的异步调用；扩展微服务架构，本系统目前后端只有后端管理、网关和模拟接
口项目，虽然采用了微服务架构，但实际的实现率并不高，未来可以将现有系统重
构为更完整的微服务架构，提高功能模块的独立性，提高系统的容错；可以采用i18n
国际化支持来统一管理系统异常抛出的message信息，结合微服务的分功能模块开发，
可以优化并单独管理每个模块的自定义异常信息，全局异常拦截器也需要扩充；重
构接口信息表的接口请求地址字段（url），使其更为细化为IP、端口、路径等，更
加方便管理、使用以及业务实现，特别是网关的动态路由实现；心跳机制的优化，
原心跳机制使用线程池处理并发心跳消息，但在高压环境下线程池总有耗尽的时候，
所以未来可以使用队列来优化消息处理，或者使用其他更轻量的检测，比如
WebSocket、Ping等。

#### 个人开发项目，仅供参考（狗头保命）
